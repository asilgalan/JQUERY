<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
   <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>
<body>
    <header
    class=" inset-x-0 top-0 z-30 mx-auto w-full max-w-screen-md border border-gray-100 bg-white/80 py-3 shadow backdrop-blur-lg md:top-6 md:rounded-3xl lg:max-w-screen-lg">
    <div class="px-4">
        <div class="flex items-center justify-between">
            <div class="flex shrink-0">
                <a aria-current="page" class="flex items-center" href="web29homedoctores.html">
                    <img class="h-7 w-auto" src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="">
                    <p class="sr-only">Crud Doctores</p>
                </a>
            </div>
            <div class="hidden md:flex md:items-center md:justify-center md:gap-5">
                <a aria-current="page"
                    class="inline-block rounded-lg px-2 py-1 text-sm font-medium text-gray-900 transition-all duration-200 hover:bg-gray-100 hover:text-gray-900"
                    href="web29homedoctores.html">Home</a>
                <a class="inline-block rounded-lg px-2 py-1 text-sm font-medium text-gray-900 transition-all duration-200 hover:bg-gray-100 hover:text-gray-900"
                    href="web29createdoctor.html">Create doctor</a>
            </div>
            <div class="flex items-center justify-end gap-3">
                <a class="hidden items-center justify-center rounded-xl bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 transition-all duration-150 hover:bg-gray-50 sm:inline-flex"
                    href="/login">Sign in</a>
                <a class="inline-flex items-center justify-center rounded-xl bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm transition-all duration-150 hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600"
                    href="/login">Login</a>
            </div>
        </div>
    </div>
</header>

<main class="container mx-auto p-50">
<table class="min-w-full divide-y divide-gray-200 overflow-x-auto w-auto py-50 h-auto">
    <thead class="bg-gray-50">
        <tr>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                idDoctor
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                idHospital
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                apellido
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                especialidad
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                salario
            </th>
            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Accion
            </th>
           
        </tr>
    </thead>
    <tbody id="llenarDoctores" class="bg-white divide-y divide-gray-200" >
        

    </tbody>
    </main>
</table>
  <script src="js/jquery-3.7.1.min.js"></script>
<script>
    let url="https://apicruddoctores.azurewebsites.net/";
     $(document).ready(function(){
            
       
        let request="api/Doctores";
            var html="";
        $.ajax({
            url:url+request,
            method:"GET",
            success:function(data){
             
                console.log("good");
                $.each(data,function(index,valor){

                     html+="<tr>"                   
                     
                                            html+="<td  scope='row' class='px-6 py-4 whitespace-nowrap'>"+ valor.idDoctor+"</td>";
                                            html+="<td  scope='row' class='px-6 py-4 whitespace-nowrap'>"+ valor.idHospital+"</td>";
                                            html+="<td  scope='row'  class='px-6 py-4 whitespace-nowrap'>"+ valor.apellido+"</td>";
                                            html+="<td  scope='row' class='px-6 py-4 whitespace-nowrap'>"+ valor.especialidad+"</td>";
                                            html+="<td  scope='row' class='px-6 py-4 whitespace-nowrap'>"+ valor.salario+"</td>";
                                            html+="<td scope='row' class='px-6 py-4 whitespace-nowrap'>"
                                            html+="<button class='btneliminar cursor-pointer bg-red-500  hover-bg-red-700 text-white font-bold py-3 px-4 rounded px-10 mx-2' value='"+ valor.idDoctor +"' > Eliminar </button>"
                                            html+="</td>" 
                                 html+="</tr>"
                
         
                })
                $("#llenarDoctores").html(html)
      
            }
       


        })

        $(document).on("click","button.btneliminar",function(){
        
          id=$(this).val();
           Swal.fire({
    title: 'Deseas eliminar?',
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'si,'
  }).then(result => {
    if (result.value) {
      borrarDoctor(id);
    }
  });
            

        })

        function borrarDoctor(id){
              let requestdelete="api/Doctores/"+id;
             $.ajax({
                 url:url+requestdelete,
                 method:"DELETE",
                success:function(){
                 
                    window.location.reload();
                }

            })

        }

})
</script>
</body>
</html>